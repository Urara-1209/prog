<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Time</title>
<script src="js/jquery-2.1.3.min.js"></script>
<link rel="stylesheet" href="css/sample.css">
<link href="https://fonts.googleapis.com/earlyaccess/nicomoji.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Caveat rel=" rel="stylesheet">
<script type="text/javascript">
    function white(){
        document.bgColor="#ffffff"
        document.fgColor="#000000"
    }
    function spring(){
        document.bgColor="#ffabce"
        document.fgColor="#990033"
    }
    function summer(){
        document.bgColor="#99ffff"
        document.fgColor="#005fff"
    }
    function autumn(){
        document.bgColor="#ffa07a"
        document.fgColor="#a0522d"
    }
    function winter(){
        document.bgColor="#a4c6ff"
        document.fgColor="#000033"
    }

    // tempo : テンポ（1分間に何拍するか）
    // beat  : 拍子（指定した拍数ごとに高いビープ音を鳴らす）
    function metronome(tempo, beat){
        // 低め音
        var low = "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";

        // 高めの音
        var high = "UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";

        // それぞれ Audio オブジェクト生成
        var lowPlayer = new Audio("data:audio/wav;base64," + low);
        var highPlayer = new Audio("data:audio/wav;base64," + high);

        // メトロノーム設定（正確にはひとつのInterval内で処理を書いたほうがよいが簡略化のためにふたつのIntervalで設定）
        // low の再生
        setInterval(function metronome(){
            lowPlayer.play();
        }, 60 / tempo * 1000);

        // high の再生
        setInterval(function metronome(){
            highPlayer.play();
        }, 60 / tempo * 1000 * beat);
    }   
    metronome(60, 4);// メトロノームを 1分間に60拍, 4拍子でスタート 
        function stop(){
            lowPlayer.pause();
            lowPlayer.currentTime = 0;
            highPlayer.pause();
            highPlayer.currentTime = 0;
        } 

    var timerId;
    // ボックスを表示して、タイマーを開始
    function showBox() {
        document.getElementById("temporaryBox").style.display = "block"; // ボックスを表示
        timerId = setTimeout( closeBox , 5000 ); // タイマーを開始
        document.getElementById("btnShowBox").disabled = true; // 表示用ボタンを無効化
    }
    
    // ボックスを消して、タイマーを終了
    function closeBox() {
        document.getElementById("temporaryBox").style.display = "none"; // ボックスを消す
        clearTimeout( timerId ); // タイマーを終了
        document.getElementById("btnShowBox").disabled = false; // 表示用ボタンを有効化
        document.getElementById("btnKeepBox").disabled = false; // 維持用ボタンを有効化
    }
    
    // タイマーだけを中止
    function keepBox() {
        clearTimeout( timerId ); // タイマーを終了
        document.getElementById("btnKeepBox").disabled = true; // 維持用ボタンを無効化
    }

    var timer1; //タイマーを格納する変数（タイマーID）の宣言

    //カウントダウン関数を1000ミリ秒毎に呼び出す関数
    function cntStart()
    {
    document.timer.elements[2].disabled=true;
    timer1=setInterval("countDown()",1000);
    }

    //タイマー停止関数
    function cntStop()
    {
    document.timer.elements[2].disabled=false;
    clearInterval(timer1);
    }

    //カウントダウン関数
    function countDown()
    {
    var min=document.timer.elements[0].value;
    var sec=document.timer.elements[1].value;
    
    if( (min=="") && (sec=="") )
    {
        alert("時刻を設定してください！");
        reSet();
    }
    else
    {
        if (min=="") min=0;
        min=parseInt(min);
        
        if (sec=="") sec=0;
        sec=parseInt(sec);
        
        tmWrite(min*60+sec-1);
    }
    }

    //残り時間を書き出す関数
    function tmWrite(int)
    {
    int=parseInt(int);
    
    if (int<=0)
    {
        reSet();
        alert("時間です！");
    }
    else
    {
        //残り分数はintを60で割って切り捨てる
        document.timer.elements[0].value=Math.floor(int/60);
        //残り秒数はintを60で割った余り
        document.timer.elements[1].value=int % 60;
    }
    }

    //フォームを初期状態に戻す（リセット）関数
    function reSet()
    {
    document.timer.elements[0].value="0";
    document.timer.elements[1].value="0";
    document.timer.elements[2].disabled=false;
    clearInterval(timer1);
    }  

    nannohi();
    function nannohi(){
        date = new Date();
        year = date.getFullYear();
        mon = date.getMonth()+1
        dat = date.getDate();
        day = date.getDay();
        h = date.getHours();
        m = date.getMinutes();
        s = date.getSeconds();
        var ampm = "";
        var img;
        if(h <= 12){
            ampm = "午前";
            //alert("午前");
        }else if(h >= 13 && h <= 17){
            //alert("午後");
            ampm = "午後";
        }else{
            //alert("夜");
            ampm = "夜";
        }
        let d = "";
        if(day == 0){
            d = "日";
        }else if(day == 1){
            d = "月";
        }else if(day == 2){
            d = "火";
        }else if(day == 3){
            d ="水";
        }else if(day == 4){
            d = "木";
        }else if(day == 5){
            d = "金";
        }else{
            d == "土";
        }
        if(10 < mon || mon < 2){
            img = "<p class=resizeimage><img src=winter.jpg></p>"; //冬の画像
        }else if(mon < 5){
            img = "<img src='spring.jpg'>"; //春の画像
        }else if(mon < 8){
            img = "<img src='summer.jpg'>"; //夏の画像
        }else{
            img = "<img src='autumn.jpg'>"; //秋の画像
        }
        data = new Array();
        i=0;
        data[i] = new Array("1","1","元旦");i++;
        data[i] = new Array("2","3","節分");i++;
        data[i] = new Array("2","11","建国記念の日");i++;
        data[i] = new Array("5","3","憲法記念日");i++;
        data[i] = new Array("5","5","こどもの日");i++;
        data[i] = new Array("8","x","夏休み");i++;
        data[i] = new Array("9","23","秋分の日");i++;
        data[i] = new Array("11","23","勤労感謝の日");i++;
        data[i] = new Array("x","25","給料日");i++;
        data[i] = new Array("12","9","誕生日");i++;
        data[i] = new Array("12","24","クリスマスイブ");i++;
        data[i] = new Array("12","25","クリスマス");i++;
        data[i] = new Array("12","31","大晦日");i++;
        //季節の画像
        document.write(img);
        //今日
        document.write("<br><b>今日は "+year+"年"+mon+"月"+dat+"日"+"("+d+") "+h+"時"+m+"分"+s+"秒 "+ampm+"</b><br>");
        for(i=0;i<data.length;i++){
            if((data[i][0]==mon || data[i][0]=="x") 
            && (data[i][1]==dat)) document.write("・"+data[i][2]+"<br>");
        }
        //今月の記念日
        document.write("<br><b>今月の記念日</b><br>");
        for(i=0;i<data.length;i++){
            if(data[i][0]==mon || data[i][0]=="x"){
                if(data[i][1]=="x") document.write("・ "+data[i][2]+"<br>");
                else document.write("・"+mon+"/"+data[i][1]+" "+data[i][2]+"<br>");
            }
        }
    }
    setInterval(() => {
        // 現在時間の取得
        const now = new Date();
        const h = now.getHours();
        const m = now.getMinutes();
        const s = now.getSeconds();

        // 時、分、秒を元に角度を計算
        const degH = h * (360 / 12) + m * (360 / 12 / 60);
        const degM = m * (360 / 60);
        const degS = s * (360 / 60);

        // 各要素を取得
        const elementH = document.querySelector(".c-clock__hour");
        const elementM = document.querySelector(".c-clock__min");
        const elementS = document.querySelector(".c-clock__sec");

        // styleを追加
        elementH.style.transform = `rotate(${degH}deg)`;
        elementM.style.transform = `rotate(${degM}deg)`;
        elementS.style.transform = `rotate(${degS}deg)`;
    }, 10);
</script>
</head>
<body>
    <div class="snow">●</div>
<header>
    <h1>Various Times</h1>
</header>
<form name = "c_change">
    <input type="button" value="白" onClick="white()">
    <input type="button" value="春" onClick="spring()">
    <input type="button" value="夏" onClick="summer()">
    <input type="button" value="秋" onClick="autumn()">
    <input type="button" value="冬" onClick="winter()">
</form>
<form name = "metronome">
    <input type="button" value="メトロノーム" onClick="setInterval()">
</form>
<form name = "cal">
    <input type="date">
</form>
<p id="temporaryBox" style="display: none;">
    5秒間だけ表示されます</br>
    <input type="button" value="ずっと表示しておく" id="btnKeepBox" onclick="keepBox();">
    <input type="button" value="今すぐ消す" id="btnCloseBox" onclick="closeBox();">
</p>
<p>
    <input type="button" value="5秒間だけ文字を表示する" id="btnShowBox" onclick="showBox();">
</p>
<h3>タイマー</h3>
<form name="timer">
    <input type="text" value="">分
    <input type="text" value="">秒<br>
    <input type="button" value="スタート" onclick="cntStart()">
    <input type="button" value="ストップ" onclick="cntStop()">
</form>
<main>
    <div class="c-clock"> 
        <span class="c-clock__hour"></span> <!-- 時計 -->
        <span class="c-clock__min"></span> <!-- 分針 -->
        <span class="c-clock__sec"></span> <!-- 秒針 -->
        <span class="c-clock__12">12</span> <!-- 時計文字 -->
        <span class="c-clock__3">3</span> <!-- 時計文字 -->
        <span class="c-clock__6">6</span> <!-- 時計文字 -->
        <span class="c-clock__9">9</span> <!-- 時計文字 -->
    </div>
</main>
<script>
</script>
<footer>
</footer>
</body>
</html>